###### <sub><font color = orange>JAVASE基础教程</font></sub><br />——<br /><sup><font color=white>卷4</font></sup><font color=white>数组</font><br/><sup><sub><font color=cyan>节5</font></sub><font color=cyan>方法的传值问题</font></sup><br/><br/>	``#最新版本|V4.0#(purple) ``<br/>**长风**<br/>*COPYRIGHT ⓒ 2021. 王道版权所有*

[TOC]

# 概述/基本概念

> `>(green)`
>
> > 什么是方法的传值问题？
>
> 调用方法时，我们需要传递实参给方法，在方法内部会改变这些实参的值，那么方法执行完毕后，这些实参的值会怎么变呢？这就是方法的传值问题。
>
> 在了解Java的传值方式之前，首先介绍两种常见传值的方式：
>
> 1. **值传递（call by value），指的是调用方法时，传入的是实参的拷贝而不是实参本身。**这样做的结果是，方法改变的是实参拷贝的值，原本实参的值是不会变的。
> 2. 引用传递（call by reference），指的是调用方法时，传入的是实参变量的地址，也就是实参本身。这样做的结果，方法改变的是实参本身的值，方法结束后，原本实参变量的值会随直改变。
>
> ---
>
> Java到底是哪一种传递模式？又或者对基本数据类型是值传递，对引用类型是引用传递？对于这个问题，首先要搞清楚一些概念：
>
> 1. 引用数据类型和基本数据类型的区别
>    - 基本数据类型，值就直接保存在栈上的变量中
>    - 引用数据类型，栈上变量保存的是堆上对象的地址，也就是引用
> 2. 赋值运算符“=”的作用
>    - 基本数据类型，赋值符号会直接覆盖原本的值，原先的值就没了
>    - 引用数据类型，赋值符号会直接覆盖引用中原先保存的地址值，原先的地址被覆盖掉
>      - 注意，原先引用地址所指向的对象不会发生变化（重点）

# Java的值传递

> `>(green)`
>
> 实际上严格来说，Java只存在值传递，方法得到的是变量的拷贝，而不是变量的地址。
>
> 1. 对于基本数据类型而言，方法调用过程如下：
>    1. 在调用的方法的栈帧中初始化一个实参的副本
>    2. 对这个副本进行操作，原先main方法栈帧的变量的值不会发生变化
>    3. 并且这个方法执行完毕后，随着方法出栈，这个实参的副本也被销毁了
> 2. 对于引用数据类型而言，方法调用过程如下：
>    1. 在调用的方法的栈帧中声明一个引用的拷贝，因为是拷贝，所以这个引用中存的内存地址和原先的引用一样
>
>       - 结果就是，这个副本仍然指向了原先引用所指向的对象
>
>    2. 对这个引用的副本进行操作，原先main方法栈帧的引用不会发生变化，但由于指向的是同一对象
>
>       - 结果就是，引用和引用拷贝指向的对象本身被改变了
>
>    3. 方法结束后，这个引用拷贝也被销毁了
>

## 证明Java值传递

> `>(green)`
>
> 很多程序语言（尤其是C/C++）提供了两种传参方式，导致很多人也认为Java也是两种传参方式。这里举一个反例：
>
> 1. 声明初始化两个数组
>
> 2. 提供一个交换数组的方法swap：
>
>    ###### 验证Java值传递的方法
>
>    ``` java
>    public static void swapArray(int[] arr1,int[] arr2){
>        int[] temp;
>        temp = arr1;
>        arr1 = arr2;
>        arr2 = temp;
>    }
>    ```
>
> 3. 方法的调用过程如下：
>
>    1. 首先在调用方法的栈帧中声明两个数组的引用拷贝，仍指向原先的数组
>    2. 交换这两个拷贝的值，实际上就是交换它们指向的数组，这里两个拷贝完成了数组交换
>       - 原先的数组引用不受影响
>    3. 方法结束后，这两个引用拷贝被销毁
>
>    实测下来，运行结果和我们上述一样，证明Java只有值传递。

## 总结

> `>(green)`
>
> > 总结：Java方法对方法参数能做什么？
>
> 1. 不能修改基本数据类型的实参的值，也不能修改引用数据类型实参引用的取值
>    - <font color=red>**一个方法不能修改其它方法中局部变量的取值。**</font>
>    - **一旦违反上述原则，那么局部变量就不"局部"了。**
> 2. 可以改变引用数据类型中对象里的数据（称之为**改变对象的状态**，改变对象的属性值）

# 启示

> `>(red)`
>
> > 写在最后
> >
> > 不要纠结概念，Java到底是什么传值方式？即便是到了今天，仍然会有人在网络上争吵
> >
> > 有些人会说：Java方法传值的本质是值传递不错，但是对于引用类型，确实可以改变对象里的数据
> >
> > 应该叫引用传递。所以Java是值传递和引用传递共存，表面有引用传递，本质是值传递
>
> - 不要和喷子和钢筋对线，就告诉他们他们是正确的
> - 理解本质，关注原理
> - 概念是死的，思想是活跃的

###### The End
