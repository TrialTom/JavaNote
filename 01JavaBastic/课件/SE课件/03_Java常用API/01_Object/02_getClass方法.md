###### <sub><font color = orange>JAVASE基础教程</font></sub><br />——<br /><sup><font color=white>卷1</font></sup><font color=white>Object类</font><br/><sup><sub><font color=cyan>节2</font></sub><font color=cyan>getClass方法</font></sup><br/><br/>	``#最新版本|V1.0#(purple) ``<br/>**长风**<br/>*COPYRIGHT ⓒ 2021. 王道版权所有*

[TOC]

# 方法的声明

> `>(green)`
>
> 方法声明为：
>
> ``` java
> public final native Class<?> getClass();
> ```
>
> 解释：
>
> 1. 首先它的访问权限修饰符是public，访问权限问题不用考虑。
> 2. **final修饰它，表示它无法被重写。**
> 3. native表示该方法是一个本地方法，指的是Java调用其它语言（主要是C/C++）的实现来完成功能的方法。本地方法不需要方法体，我们也不会考虑它的实现细节。
> 4. `Class<?>`是返回值类型，表示该方法需要返回一个Class对象。其中`<?>`表示泛型，关于泛型后面会详细讲，这里我们先忽略它，并不影响方法调用结果。
> 5. 该方法不需要任何参数。

# 作用

> `>(green)`
>
> 通过一个本地方法的实现，去获取Class对象。
>
> 所以接下来的问题，主要是：
>
> 1. 什么是Class对象？
> 2. Class类是什么？它又有什么作用？
>
> 接下来，我们就主要来研究一下Class类和它的对象。

# Class对象

> `>(red)`
>
> 现在我们已经对类加载很熟悉了，在类加载过程中，`JVM`通过读取某个类的二进制字节码文件，了解该类型。
>
> **也就是说，程序运行期间，JVM通过类加载能够了解某个类型的信息，那如果程序员也想在程序的运行期间获取某个类的类型信息呢？**（这种需求是很常见的，因为如果运行期间程序员也能获取类型信息，那就意味着程序具有了动态性，大大提升程序的灵活性。）
>
> 为了满足程序员的这种需求，于是，JVM在类加载某个类的同时，会在堆上会自动创建一个该类的<span style=color:red;background:yellow>**运行时类对象**</span>，也就是这个类的Class对象。Class对象当中，包含了该类的所有类型信息**（比如类名是啥，有哪些方法、变量、构造器等）**，于是程序员在程序的运行时期，只需要获取该类的Class对象，就能够获取类型信息了。
>
> 这就是Class对象的作用，也叫`运行时类对象`。

# 注意事项

> `>(green)`
>
> 使用`getClass`方法的注意事项：
>
> 1.  <span style=color:red;background:yellow>**`getClass`方法只是获取Class对象**</span>，这个对象是JVM在类加载时创建的，不是`getClass`方法创建的。Class对象和某个类的对象也没有关系，后面我们还会学习几种获取Class对象的方式，可以不创建某个类的对象也能获取类的Class对象。
>
> 2. **一个类的类加载只有一次，同一个类型的运行时Class对象在内存中，也只有唯一一个。**而不同类的Class对象必然不是同一个对象。 <span style=color:red;background:yellow>**这一点是非常重要的，用这个特点，可以判断两个引用所指向的对象是否是同一个类型的对象。**</span>
>
> 3. 运行时类的Class对象只有一个，而类的对象可以有无数个。有时，我们也把类的运行时对象，称之为"类对象"。而具体的类的对象，称之为"类的对象"。**当然我不建议，在学习中抠字眼，大家知道这个说法就行。**
>
> 4. Class类对象是反射的基础，反射实际上就是Class类的API的调用。反射获取Class对象后，获取类型信息，还可以破解私有权限，反射在Java中可以称得上`为所欲为`。
>
>    注：这里我们不讲反射，关于Class类的API使用，我们也不详细去讲。提供两个方法，大家可以简单使用一下：
>
>    ###### ClassAPI举例
>
>    ``` java
>    // 获取类的全限定类名
>    getName()
>    // 获取类名
>    getSimpleName()
>    ```
>
>    通过`getClass`方法获取Class对象后，直接调用方法即可。

# 练习

> `>(red)`
>
> 对于两个引用`a1`和`a2`，分别调用`getClass`方法，然后用`==`连接，比较方法的结果。最后表达式运算的结果是true，这说明什么？
>
> 返回true意味着指向同一个Class对象，说明a1和a2指向的对象至少是同一个类型的对象
>
> 但是a1和a2是不是指向同一个对象？有可能，但不一定。

###### The End