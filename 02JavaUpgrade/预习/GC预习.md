# GC预习

## jvm运行时数据区

![image-20211020143209966](https://gitee.com/uncleTao/picture-bed/raw/master/img/image-20211020143209966.png)

**程序计数器**
      程序计数器（Program Counter Register）是一块较小的内 存空间，它的作用可以看做是当前线程所执行的字节码的行号指示器。(每个线程都有自己的程序计数器，线程隔离)

**Java虚拟机栈**
     它描述的是Java 方法执行的内存模型：每个方法被执行的时候都会同时创建一个栈帧（Stack Frame ）用于存储局部变量表、操作栈、动态链接、方法出口等信息。线程私有(线程隔离)

**本地方法栈(线程私有)**
     本地方法栈（Native Method Stacks）与虚拟机栈所发挥的作用是非常相似的，其区别不过是虚拟机栈为虚拟机执行Java 方法（也就是字节码）服务，而本地方法栈则是为虚拟机使用到的Native 方法服务。

**Java堆**
     此内存区域的唯一目的就是存放对象，一个JVM实例只存在一个堆，堆内存的大小是可以调节的.堆内存是线程共享的。totalMemory 默认是系统64分之一 250M     maxMemory 默认是系统的四分之一 4g

 -Xms200m     -Xmx300m

**方法区(线程共享)**
     方法区（Method Area）与Java 堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类信息、常量  、静态变量等数据。



## 内存分配方式

- 常见的内存分配方式有什么特点?
  - 显示内存分配
  - 隐式内存分配

## GC

### 如何确定垃圾?

**2种算法**

- 引用计数法
- 根搜索

### 如何会收垃圾?

**4种算法**

- 标记清除算法
- 标记复制算法
- 标记整理(压缩)算法
- 分代收集算法

### 什么时候回收垃圾?

- 申请heap space失败后会触发GC回收
- 系统进入idle后一段时间会进行回收
- 主动调用GC进行回收

